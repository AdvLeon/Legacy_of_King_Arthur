#################################################
#
# NEW CULTURAL CONVERSION EVENTS
#
#################################################

namespace = brit

# The Brittonic Melting Pot
character_event = {
	id = brit.4001
	desc = "brit.d.4001"
	picture = GFX_evt_stone_church
	
	only_playable = yes
	
	trigger = {
		OR = { 
		culture = welsh
		culture = breton
			}
		year = 800
		has_global_flag = excalibur_found
		any_demesne_province = {
			region = custom_england
			culture = saxon
			any_province_holding = {
				NOT = { holding_type = nomad }
			}
		}
		NOT = { government = chinese_imperial_government }
	}
	
	mean_time_to_happen = {
		months = 2	####1200####
		modifier = {
			factor = 0.75
			learning = 7
		}
		modifier = {
			factor = 0.75
			learning = 9
		}
		modifier = {
			factor = 0.75
			learning = 11
		}
		modifier = {
			factor = 0.75
			learning = 13
		}
		modifier = {
			factor = 1.5
			NOT = { learning = 5 }
		}
		modifier = {
			factor = 1.5
			NOT = { learning = 3 }
		}
		modifier = {
			factor = 2.0
			NOT = { learning = 1 }
		}
		modifier = {
			factor = 0.3
			OR = {
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots
				}
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots_and_slower_normal
				}
			}
		}
	}

	option = {
		name = "brit.o.a.4002"
		culture = brittonic
		random_demesne_province = {
			limit = {
				region = custom_england
				culture = saxon
				any_province_holding = {
					NOT = { holding_type = nomad }
				}
			}
			culture = brittonic
		}
	}
}

# It's spreading
character_event = {
	id = brit.4003
	desc = "brit.d.4003"
	picture = GFX_evt_stone_church
	
	only_playable = yes
	culture = brittonic
	
	trigger = {
		year = 800
		any_demesne_province = {
			region = custom_england
			OR = {
				culture = saxon
				culture = breton
				culture = welsh
			}
			any_province_holding = {
				NOT = { holding_type = nomad }
			}
		}
	}
	
	mean_time_to_happen = {
		months = 2	###720###
		modifier = {
			factor = 0.3
			OR = {
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots
				}
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots_and_slower_normal
				}
			}
		}
	}

	option = {
		name = "brit.o.a.4003"
		random_demesne_province = {
			limit = {
				region = custom_england
				OR = {	
					culture = saxon
					culture = breton
					culture = welsh
				}
				any_province_holding = {
					NOT = { holding_type = nomad }
				}
			}
			culture = brittonic
		}
	}
}

#Make my court speak Brittonic
character_event = {
	id = brit.4004
	desc = "brit.d.4004"
	picture = GFX_evt_throne_room
	
	only_rulers = yes
	culture = brittonic

	trigger = {
		year = 800
		top_liege = {
			primary_title = {
				OR = {
					title = k_england
					title = e_britannia
				}
			}
		}
		any_courtier = {
			OR = {
				culture = saxon
				culture = breton
				culture = welsh
			}
		}
	}
	
	mean_time_to_happen = {
		months = 2	###120###
		modifier = {
			factor = 0.3
			OR = {
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots
				}
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots_and_slower_normal
				}
			}
		}
	}

	option = {
		name = "brit.o.a.4004"
		random_courtier = {
			limit = {
				OR = {	
					culture = saxon
				}
			}
			culture = saxon
			hidden_tooltip = {
				character_event = { id = brit.4006 days = 3 }
			}
		}
	}
}

#Make my vassal speak Brittonic
character_event = {
	id = brit.4005
	desc = "brit.d.4005"
	picture = GFX_evt_throne_room
	
	only_playable = yes
	culture = brittonic

	trigger = {
		year = 800
		independent = no
		top_liege = {
			primary_title = {
				OR = {
					title = k_england
					title = e_britannia
				}
			}
		}
		any_vassal = {
			OR = {
				culture = saxon
				culture = norman
			}
		}
	}
	
	mean_time_to_happen = {
		months = 2	###720###
		modifier = {
			factor = 0.3
			OR = {
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots
				}
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots_and_slower_normal
				}
			}
		}
	}

	option = {
		name = "brit.o.a.4005"
		random_vassal = {
			limit = {
				OR = {	
					culture = saxon
				}
			}
			hidden_tooltip = {
				character_event = { id = brit.4006 days = 3 }
			}
		}
	}
}

character_event = {
	id = brit.4006
	desc = "brit.d.4006"
	picture = GFX_evt_throne_room

	is_triggered_only = yes

	option = {
		name = "brit.o.a.4006"
		culture = brittonic
	}
}


# A ruler is assimilated by the local culture
character_event = {
	id = brit.4010
	desc = "brit.d.4010"
	picture = GFX_evt_stone_church
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	lacks_dlc = "Rajas of India" # Controlled by Decision: convert_to_local_culture
	
	trigger = {
		NOT = { government = nomadic_government }
		primary_title = { 
			NOT = { conquest_culture = ROOT } 
			NOT = { culture = ROOT }
			any_previous_holder = {
				NOT = { character = ROOT } # The first holder of a title does not convert
			}
		}
		capital_scope = {
			NOT = { culture = ROOT }
			OR = {
				NOT = { OR = {	
					culture = saxon
					culture = breton
					culture = welsh
					}
				}
				NOT = { ROOT = { culture = norman } }
			}
			
			OR = { # Not when Norman culture should appear
				ROOT = { NOT = { culture = norse } }
				AND = {
					NOT = { culture = frankish }
					NOT = {	culture = breton }
					NOT = { culture = occitan }
				}
				NOT = { has_dlc = "The Old Gods" }
			}
		}
		top_liege = {
			OR = {
				character = ROOT
				ROOT = { 
					capital_scope = {
						culture = PREVPREV
					}
				}
			}
		}
		NOT = { government = chinese_imperial_government }
	}
	
	mean_time_to_happen = {
		months = 2	###1200###
		modifier = {
			factor = 0.5
			top_liege = {
				NOT = { character = ROOT }
				ROOT = { 
					capital_scope = {
						culture = PREVPREV
					}
				}
			}
		}
		modifier = {
			factor = 0.5
			primary_title = {
				ROOT = {
					capital_scope = {
						culture = PREVPREV
					}
				}
			}
		}
		modifier = {
			factor = 2.0
			capital_scope = {
				culture_group = ROOT # Same culture group: slower assimilation
			}
		}
	}

	option = {
		name = "brit.o.a.4010"
		
		# Piss off the appropriate vassals
		any_vassal = {
			limit = {
				culture = ROOT
				age = 16
			}
			opinion = {
				who = ROOT
				modifier = opinion_adopted_foreign_ways
				years = 10
			}
			hidden_tooltip = { character_event = { id = brit.4011 days = 0 } }
		}
		
		capital_scope = {
			reverse_culture = ROOT
		}
	}
	
	option = {
		name = "brit.o.b.4010"
		ai_chance = {
			factor = 0
		}
	}
}


character_event = {
	id = brit.4011
	desc = "brit.d.4011"
	picture = GFX_evt_scandal

	is_triggered_only = yes

	option = {
		name = "brit.o.a.4011"
		tooltip = {
			opinion = {
				who = FROM
				modifier = opinion_adopted_foreign_ways
				years = 10
			}
		}
	}
}

character_event = {
	id = brit.4100
	desc = brit.d.4100
	picture = GFX_evt_courier
	
	notification = yes
	
	is_triggered_only = yes

	option = {
		name = OK
	}
}